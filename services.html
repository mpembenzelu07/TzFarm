<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Export Services | FAMM ATL Company Ltd</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Map Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <style>
        /* Enhanced CSS for services page */
        :root {
            --primary: #2e7d32;
            --primary-dark: #1b5e20;
            --primary-light: #4caf50;
            --secondary: #ff9800;
            --text-dark: #333333;
            --text-light: #666666;
            --bg-light: #ffffff;
            --bg-light-secondary: #f9f9f9;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        /* Interactive Shipping Map */
        .shipping-map-container {
            height: 500px;
            border-radius: 20px;
            margin: 40px 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        #shippingMap {
            width: 100%;
            height: 100%;
            border-radius: 20px;
        }

        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .route-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .route-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .route-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* AI Documentation Wizard */
        .ai-document-wizard {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 60px 0;
        }

        .wizard-steps {
            display: flex;
            justify-content: space-between;
            margin: 40px 0;
            position: relative;
        }

        .wizard-step {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            position: relative;
            z-index: 2;
            cursor: pointer;
            transition: all 0.3s;
        }

        .wizard-step.active {
            background: var(--secondary);
            transform: scale(1.2);
            box-shadow: 0 10px 20px rgba(255,152,0,0.3);
        }

        .wizard-step.completed {
            background: #4caf50;
        }

        .wizard-progress {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255,255,255,0.2);
            transform: translateY(-50%);
        }

        .wizard-progress-bar {
            height: 100%;
            background: var(--secondary);
            width: 0%;
            transition: width 0.5s;
        }

        .wizard-content {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            min-height: 300px;
        }

        /* Port Congestion Heat Map */
        .port-congestion-map {
            height: 400px;
            background: #1a1a1a;
            border-radius: 15px;
            margin: 40px 0;
            position: relative;
            overflow: hidden;
        }

        .congestion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
        }

        .port-cell {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            color: white;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .port-cell:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .congestion-level {
            position: absolute;
            top: 0;
            right: 0;
            width: 50px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .low-congestion { background: linear-gradient(90deg, transparent 0%, #4caf50 100%); }
        .medium-congestion { background: linear-gradient(90deg, transparent 0%, #ff9800 100%); }
        .high-congestion { background: linear-gradient(90deg, transparent 0%, #f44336 100%); }

        /* Carbon Footprint Calculator */
        .carbon-calculator {
            background: linear-gradient(135deg, #00b09b, #96c93d);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 60px 0;
        }

        .calculator-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .calc-input-group {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
        }

        .carbon-visualization {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
        }

        .carbon-bar {
            width: 40px;
            background: #ff9800;
            border-radius: 10px 10px 0 0;
            position: relative;
            transition: height 1s;
        }

        .carbon-bar::after {
            content: attr(data-co2);
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
        }

        /* Smart Logistics Cost Estimator */
        .logistics-estimator {
            background: #1a472a;
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 60px 0;
        }

        .estimator-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .estimator-result {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        /* Document Processing Timeline */
        .document-timeline {
            background: linear-gradient(135deg, #8e2de2, #4a00e0);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 60px 0;
        }

        .timeline-visual {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 40px 0;
            position: relative;
        }

        .timeline-step {
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .step-circle.active {
            background: var(--secondary);
            transform: scale(1.2);
        }

        .step-circle.completed {
            background: #4caf50;
        }

        /* Continue with original CSS... */
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="lang-btn" onclick="changeLanguage('en')">EN</button>
        <button class="lang-btn" onclick="changeLanguage('sw')">SW</button>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <i class="fas fa-seedling"></i>
                <div class="logo-text">FAMM<span>ATL</span></div>
            </a>
            
            <nav>
                <ul>
                    <li><a href="index.html" data-lang="home">Home</a></li>
                    <li><a href="about.html" data-lang="about">About Us</a></li>
                    <li><a href="products.html" data-lang="products">Products</a></li>
                    <li><a href="services.html" class="active" data-lang="services">Export Services</a></li>
                    <li><a href="certifications.html" data-lang="certifications">Certifications</a></li>
                    <li><a href="contact.html" data-lang="contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1 data-lang="services_title">Comprehensive Export Services</h1>
            <div class="breadcrumb">
                <a href="index.html" data-lang="home">Home</a>
                <span>/</span>
                <span data-lang="services">Export Services</span>
            </div>
        </div>
    </section>

    <!-- Interactive Shipping Map -->
    <section class="section">
        <div class="container">
            <div class="section-title">
                <h2 data-lang="shipping_map_title">Global Shipping Route Optimizer</h2>
                <p data-lang="shipping_map_desc">Visualize optimal shipping routes with real-time vessel tracking</p>
            </div>
            
            <div class="shipping-map-container">
                <div id="shippingMap"></div>
                
                <div class="map-controls">
                    <div class="route-selector">
                        <button class="route-btn" onclick="showRoute('dar_to_rotterdam')" data-lang="route_europe">
                            <i class="fas fa-ship"></i> Europe
                        </button>
                        <button class="route-btn" onclick="showRoute('dar_to_shanghai')" data-lang="route_asia">
                            <i class="fas fa-ship"></i> Asia
                        </button>
                        <button class="route-btn" onclick="showRoute('dar_to_dubai')" data-lang="route_middle_east">
                            <i class="fas fa-ship"></i> Middle East
                        </button>
                    </div>
                    
                    <div style="color: #666; font-size: 0.9rem;">
                        <div><i class="fas fa-circle" style="color: #4caf50;"></i> <span data-lang="low_congestion">Low Congestion</span></div>
                        <div><i class="fas fa-circle" style="color: #ff9800;"></i> <span data-lang="medium_congestion">Medium Congestion</span></div>
                        <div><i class="fas fa-circle" style="color: #f44336;"></i> <span data-lang="high_congestion">High Congestion</span></div>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="info-card">
                    <h3><i class="fas fa-route"></i> <span data-lang="optimal_route">Optimal Route</span></h3>
                    <p id="routeInfo" data-lang="route_default">Select a route to see details</p>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-clock"></i> <span data-lang="transit_time">Transit Time</span></h3>
                    <p id="transitTime">-</p>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-money-bill-wave"></i> <span data-lang="estimated_cost">Estimated Cost</span></h3>
                    <p id="estimatedCost">-</p>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-leaf"></i> <span data-lang="carbon_emission">Carbon Emission</span></h3>
                    <p id="carbonEmission">-</p>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Documentation Wizard -->
    <section class="section">
        <div class="container">
            <div class="ai-document-wizard">
                <div class="section-title" style="color: white;">
                    <h2 data-lang="ai_wizard_title">AI Export Documentation Wizard</h2>
                    <p data-lang="ai_wizard_desc">Let our AI guide you through export document preparation</p>
                </div>
                
                <div class="wizard-steps">
                    <div class="wizard-progress">
                        <div class="wizard-progress-bar" id="wizardProgress"></div>
                    </div>
                    
                    <div class="wizard-step active" onclick="goToStep(1)">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="wizard-step" onclick="goToStep(2)">
                        <i class="fas fa-passport"></i>
                    </div>
                    <div class="wizard-step" onclick="goToStep(3)">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <div class="wizard-step" onclick="goToStep(4)">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div class="wizard-step" onclick="goToStep(5)">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
                
                <div class="wizard-content" id="wizardContent">
                    <h3 data-lang="step1_title">Step 1: Product Information</h3>
                    <p data-lang="step1_desc">Enter details about the product you're exporting</p>
                    
                    <div style="margin-top: 20px;">
                        <input type="text" id="productName" placeholder="Product name..." style="width: 100%; padding: 15px; border: none; border-radius: 8px; margin-bottom: 15px;">
                        <input type="number" id="productQuantity" placeholder="Quantity (MT)..." style="width: 100%; padding: 15px; border: none; border-radius: 8px;">
                    </div>
                    
                    <div style="margin-top: 30px; text-align: right;">
                        <button onclick="nextStep()" style="background: var(--secondary); color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer;">
                            <span data-lang="next_step">Next Step</span> <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Port Congestion Heat Map -->
    <section class="section">
        <div class="container">
            <div class="section-title">
                <h2 data-lang="port_congestion_title">Global Port Congestion Monitor</h2>
                <p data-lang="port_congestion_desc">Real-time congestion levels at major global ports</p>
            </div>
            
            <div class="congestion-grid" id="congestionGrid">
                <!-- Port cells generated by JavaScript -->
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <p data-lang="last_updated">Last updated: <span id="lastUpdated">Just now</span></p>
                <button onclick="refreshCongestionData()" style="background: var(--primary); color: white; border: none; padding: 12px 30px; border-radius: 30px; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i>
                    <span data-lang="refresh_data">Refresh Data</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Carbon Footprint Calculator -->
    <section class="section">
        <div class="container">
            <div class="carbon-calculator">
                <div class="section-title" style="color: white;">
                    <h2 data-lang="carbon_calculator_title">Carbon Footprint Calculator</h2>
                    <p data-lang="carbon_calculator_desc">Calculate and offset your shipment's carbon emissions</p>
                </div>
                
                <div class="calculator-inputs">
                    <div class="calc-input-group">
                        <label data-lang="shipment_weight">Shipment Weight (MT)</label>
                        <input type="range" id="weightSlider" min="1" max="1000" value="100" style="width: 100%; margin: 15px 0;">
                        <div id="weightValue">100 MT</div>
                    </div>
                    
                    <div class="calc-input-group">
                        <label data-lang="distance">Distance (km)</label>
                        <input type="range" id="distanceSlider" min="1000" max="20000" value="8000" style="width: 100%; margin: 15px 0;">
                        <div id="distanceValue">8,000 km</div>
                    </div>
                    
                    <div class="calc-input-group">
                        <label data-lang="transport_mode">Transport Mode</label>
                        <select id="transportMode" style="width: 100%; padding: 10px; border-radius: 5px; margin-top: 10px;">
                            <option value="ship" data-lang="sea_transport">Sea Transport</option>
                            <option value="air" data-lang="air_transport">Air Transport</option>
                            <option value="road" data-lang="road_transport">Road Transport</option>
                        </select>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 30px 0;">
                    <button onclick="calculateCarbonFootprint()" style="background: white; color: #00b09b; border: none; padding: 15px 40px; border-radius: 30px; font-size: 1.1rem; cursor: pointer;">
                        <i class="fas fa-leaf"></i>
                        <span data-lang="calculate_carbon">Calculate Carbon Footprint</span>
                    </button>
                </div>
                
                <div class="carbon-visualization" id="carbonVisualization">
                    <!-- Carbon bars generated by JavaScript -->
                </div>
                
                <div style="text-align: center;">
                    <div id="carbonResult" style="font-size: 1.5rem; margin-bottom: 20px;"></div>
                    <button onclick="offsetCarbon()" style="background: #ff9800; color: white; border: none; padding: 12px 30px; border-radius: 30px; cursor: pointer;">
                        <i class="fas fa-tree"></i>
                        <span data-lang="offset_carbon">Offset Carbon Emissions</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Smart Logistics Cost Estimator -->
    <section class="section">
        <div class="container">
            <div class="logistics-estimator">
                <div class="section-title" style="color: white;">
                    <h2 data-lang="logistics_estimator_title">Smart Logistics Cost Estimator</h2>
                    <p data-lang="logistics_estimator_desc">Get instant cost estimates for your logistics needs</p>
                </div>
                
                <div class="estimator-controls">
                    <div>
                        <label data-lang="origin_port">Origin Port</label>
                        <select id="originPort" style="width: 100%; padding: 15px; border-radius: 8px; margin-top: 10px;">
                            <option value="dar" data-lang="port_dar">Dar es Salaam</option>
                            <option value="mombasa" data-lang="port_mombasa">Mombasa</option>
                            <option value="durban" data-lang="port_durban">Durban</option>
                        </select>
                    </div>
                    
                    <div>
                        <label data-lang="destination_port">Destination Port</label>
                        <select id="destinationPort" style="width: 100%; padding: 15px; border-radius: 8px; margin-top: 10px;">
                            <option value="rotterdam" data-lang="port_rotterdam">Rotterdam</option>
                            <option value="shanghai" data-lang="port_shanghai">Shanghai</option>
                            <option value="dubai" data-lang="port_dubai">Dubai</option>
                            <option value="newyork" data-lang="port_newyork">New York</option>
                        </select>
                    </div>
                    
                    <div>
                        <label data-lang="container_size">Container Size</label>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button class="container-btn" onclick="selectContainer(20)" style="background: #4caf50;">20ft</button>
                            <button class="container-btn" onclick="selectContainer(40)" style="background: #ff9800;">40ft</button>
                            <button class="container-btn" onclick="selectContainer(40, 'hc')" style="background: #2196f3;">40ft HC</button>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 30px 0;">
                    <button onclick="calculateLogisticsCost()" style="background: var(--secondary); color: white; border: none; padding: 15px 40px; border-radius: 30px; font-size: 1.1rem; cursor: pointer;">
                        <i class="fas fa-calculator"></i>
                        <span data-lang="calculate_cost">Calculate Total Cost</span>
                    </button>
                </div>
                
                <div class="estimator-result" id="estimatorResult">
                    <!-- Results appear here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Document Processing Timeline -->
    <section class="section">
        <div class="container">
            <div class="document-timeline">
                <div class="section-title" style="color: white;">
                    <h2 data-lang="document_timeline_title">Document Processing Timeline</h2>
                    <p data-lang="document_timeline_desc">Track your export documents through our blockchain-verified process</p>
                </div>
                
                <div class="timeline-visual">
                    <div class="timeline-step">
                        <div class="step-circle active">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div data-lang="step_document">Document Preparation</div>
                    </div>
                    
                    <div class="timeline-step">
                        <div class="step-circle">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div data-lang="step_verification">Verification</div>
                    </div>
                    
                    <div class="timeline-step">
                        <div class="step-circle">
                            <i class="fas fa-stamp"></i>
                        </div>
                        <div data-lang="step_approval">Approval</div>
                    </div>
                    
                    <div class="timeline-step">
                        <div class="step-circle">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div data-lang="step_blockchain">Blockchain Recording</div>
                    </div>
                    
                    <div class="timeline-step">
                        <div class="step-circle">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <div data-lang="step_delivery">Delivery</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <div id="documentStatus" style="font-size: 1.2rem; margin-bottom: 20px;" data-lang="status_preparing">
                        Status: Document Preparation in Progress
                    </div>
                    
                    <button onclick="simulateDocumentProcess()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid white; padding: 12px 30px; border-radius: 30px; cursor: pointer;">
                        <i class="fas fa-play"></i>
                        <span data-lang="simulate_process">Simulate Document Process</span>
                    </button>
                    
                    <button onclick="verifyOnBlockchain()" style="background: var(--secondary); color: white; border: none; padding: 12px 30px; border-radius: 30px; cursor: pointer; margin-left: 15px;">
                        <i class="fas fa-link"></i>
                        <span data-lang="verify_blockchain">Verify on Blockchain</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Continue with original services page content... -->

    <!-- JavaScript for Enhanced Features -->
    <script>
        // Multi-language support
        const translations = {
            en: {
                home: "Home",
                about: "About Us",
                products: "Products",
                services: "Export Services",
                certifications: "Certifications",
                contact: "Contact",
                services_title: "Comprehensive Export Services",
                shipping_map_title: "Global Shipping Route Optimizer",
                shipping_map_desc: "Visualize optimal shipping routes with real-time vessel tracking",
                route_europe: "Europe Route",
                route_asia: "Asia Route",
                route_middle_east: "Middle East Route",
                low_congestion: "Low Congestion",
                medium_congestion: "Medium Congestion",
                high_congestion: "High Congestion",
                optimal_route: "Optimal Route",
                route_default: "Select a route to see details",
                transit_time: "Transit Time",
                estimated_cost: "Estimated Cost",
                carbon_emission: "Carbon Emission",
                ai_wizard_title: "AI Export Documentation Wizard",
                ai_wizard_desc: "Let our AI guide you through export document preparation",
                step1_title: "Step 1: Product Information",
                step1_desc: "Enter details about the product you're exporting",
                next_step: "Next Step",
                port_congestion_title: "Global Port Congestion Monitor",
                port_congestion_desc: "Real-time congestion levels at major global ports",
                last_updated: "Last updated:",
                refresh_data: "Refresh Data",
                carbon_calculator_title: "Carbon Footprint Calculator",
                carbon_calculator_desc: "Calculate and offset your shipment's carbon emissions",
                shipment_weight: "Shipment Weight (MT)",
                distance: "Distance (km)",
                transport_mode: "Transport Mode",
                sea_transport: "Sea Transport",
                air_transport: "Air Transport",
                road_transport: "Road Transport",
                calculate_carbon: "Calculate Carbon Footprint",
                offset_carbon: "Offset Carbon Emissions",
                logistics_estimator_title: "Smart Logistics Cost Estimator",
                logistics_estimator_desc: "Get instant cost estimates for your logistics needs",
                origin_port: "Origin Port",
                destination_port: "Destination Port",
                container_size: "Container Size",
                port_dar: "Dar es Salaam",
                port_mombasa: "Mombasa",
                port_durban: "Durban",
                port_rotterdam: "Rotterdam",
                port_shanghai: "Shanghai",
                port_dubai: "Dubai",
                port_newyork: "New York",
                calculate_cost: "Calculate Total Cost",
                document_timeline_title: "Document Processing Timeline",
                document_timeline_desc: "Track your export documents through our blockchain-verified process",
                step_document: "Document Preparation",
                step_verification: "Verification",
                step_approval: "Approval",
                step_blockchain: "Blockchain Recording",
                step_delivery: "Delivery",
                status_preparing: "Status: Document Preparation in Progress",
                simulate_process: "Simulate Document Process",
                verify_blockchain: "Verify on Blockchain"
            },
            sw: {
                home: "Nyumbani",
                about: "Kuhusu Sisi",
                products: "Bidhaa",
                services: "Huduma za Usafirishaji",
                certifications: "Vyeti",
                contact: "Wasiliana",
                services_title: "Huduma Kamili za Usafirishaji",
                shipping_map_title: "Kirekebishi cha Njia za Usafirishaji Duniani",
                shipping_map_desc: "Tazama njia bora za usafirishaji na ufuatiliaji wa meli ya wakati halisi",
                route_europe: "Njia ya Ulaya",
                route_asia: "Njia ya Asia",
                route_middle_east: "Njia ya Mashariki ya Kati",
                low_congestion: "Msongamano Mdogo",
                medium_congestion: "Msongamano wa Kati",
                high_congestion: "Msongamano Mwingi",
                optimal_route: "Njia Bora",
                route_default: "Chagua njia kuona maelezo",
                transit_time: "Muda wa Usafiri",
                estimated_cost: "Gharama Iliyokadiriwa",
                carbon_emission: "Utoaji wa Kaboni",
                ai_wizard_title: "Mchawi wa Nyaraka za Usafirishaji wa AI",
                ai_wizard_desc: "Acha AI yetu kukuongoza kupitia utayarishaji wa nyaraka za usafirishaji",
                step1_title: "Hatua ya 1: Taarifa za Bidhaa",
                step1_desc: "Ingiza maelezo kuhusu bidhaa unayosafirisha",
                next_step: "Hatua Inayofuata",
                port_congestion_title: "Kifuatiliaji cha Msongamano wa Bandari Duniani",
                port_congestion_desc: "Viwango vya msongamano vya wakati halisi katika bandari kuu duniani",
                last_updated: "Ilisasishwa mwisho:",
                refresh_data: "Sasisha Data",
                carbon_calculator_title: "Kikokotoo cha Utoaji wa Kaboni",
                carbon_calculator_desc: "Kokotoa na sawazisha utoaji wa kaboni wa shehena yako",
                shipment_weight: "Uzito wa Shehena (MT)",
                distance: "Umbali (km)",
                transport_mode: "Njia ya Usafiri",
                sea_transport: "Usafiri wa Bahari",
                air_transport: "Usafiri wa Anga",
                road_transport: "Usafiri wa Barabarani",
                calculate_carbon: "Kokotoa Utoaji wa Kaboni",
                offset_carbon: "Sawazisha Utoaji wa Kaboni",
                logistics_estimator_title: "Kikadiriaji cha Gharama ya Vifaa vya Usafirishaji",
                logistics_estimator_desc: "Pata makadirio ya gharama ya papo hapo kwa mahitaji yako ya vifaa",
                origin_port: "Bandari ya Asili",
                destination_port: "Bandari ya Lengwa",
                container_size: "Ukubwa wa Kontena",
                port_dar: "Dar es Salaam",
                port_mombasa: "Mombasa",
                port_durban: "Durban",
                port_rotterdam: "Rotterdam",
                port_shanghai: "Shanghai",
                port_dubai: "Dubai",
                port_newyork: "New York",
                calculate_cost: "Kokotoa Gharama ya Jumla",
                document_timeline_title: "Mlango wa Usindikaji wa Nyaraka",
                document_timeline_desc: "Fuatilia nyaraka zako za usafirishaji kupitia mchakato wetu uliothibitishwa na blockchain",
                step_document: "Utayarishaji wa Nyaraka",
                step_verification: "Uthibitishaji",
                step_approval: "Idhini",
                step_blockchain: "Kurekodi kwa Blockchain",
                step_delivery: "Ufikishaji",
                status_preparing: "Hali: Utayarishaji wa Nyaraka Unaendelea",
                simulate_process: "Sawazisha Mchakato wa Nyaraka",
                verify_blockchain: "Thibitisha kwenye Blockchain"
            }
        };

        let currentLang = 'en';
        let map;
        let currentStep = 1;
        let selectedContainer = { size: 20, type: 'standard' };

        function changeLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            updateMap();
            updateWizardContent();
        }

        // Interactive Shipping Map
        function initMap() {
            map = L.map('shippingMap').setView([0, 30], 2);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);
            
            // Add Dar es Salaam marker
            const darMarker = L.marker([-6.7924, 39.2083]).addTo(map)
                .bindPopup('<b>Dar es Salaam Port</b><br>Origin Port')
                .openPopup();
            
            // Add major port markers
            const ports = [
                { name: 'Rotterdam', coords: [51.9225, 4.47917], congestion: 'low' },
                { name: 'Shanghai', coords: [31.23, 121.47], congestion: 'high' },
                { name: 'Dubai', coords: [25.27, 55.29], congestion: 'medium' },
                { name: 'Mombasa', coords: [-4.05, 39.67], congestion: 'low' },
                { name: 'Durban', coords: [-29.87, 31.04], congestion: 'medium' }
            ];
            
            ports.forEach(port => {
                const color = port.congestion === 'low' ? 'green' : 
                             port.congestion === 'medium' ? 'orange' : 'red';
                
                L.circleMarker(port.coords, {
                    color: color,
                    fillColor: color,
                    fillOpacity: 0.5,
                    radius: 8
                }).addTo(map).bindPopup(`<b>${port.name} Port</b><br>Congestion: ${port.congestion}`);
            });
            
            // Show default route
            showRoute('dar_to_rotterdam');
        }

        function showRoute(route) {
            // Clear existing routes
            map.eachLayer(layer => {
                if (layer instanceof L.Polyline) {
                    map.removeLayer(layer);
                }
            });
            
            const routes = {
                'dar_to_rotterdam': {
                    points: [[-6.7924, 39.2083], [0, 20], [20, 10], [40, 0], [51.9225, 4.47917]],
                    color: '#4caf50',
                    info: currentLang === 'en' 
                        ? 'Dar es Salaam → Suez Canal → Mediterranean → Rotterdam'
                        : 'Dar es Salaam → Mfereji wa Suez → Mediterranean → Rotterdam',
                    time: '28-35 days',
                    cost: '$2,800 - $3,500',
                    carbon: '180 kg CO₂/MT'
                },
                'dar_to_shanghai': {
                    points: [[-6.7924, 39.2083], [0, 50], [20, 70], [31.23, 121.47]],
                    color: '#2196f3',
                    info: currentLang === 'en'
                        ? 'Dar es Salaam → Indian Ocean → Strait of Malacca → Shanghai'
                        : 'Dar es Salaam → Bahari ya Hindi → Mlangobahari wa Malacca → Shanghai',
                    time: '25-30 days',
                    cost: '$3,200 - $4,000',
                    carbon: '210 kg CO₂/MT'
                },
                'dar_to_dubai': {
                    points: [[-6.7924, 39.2083], [0, 45], [25.27, 55.29]],
                    color: '#ff9800',
                    info: currentLang === 'en'
                        ? 'Dar es Salaam → Arabian Sea → Dubai'
                        : 'Dar es Salaam → Bahari ya Arabia → Dubai',
                    time: '12-18 days',
                    cost: '$1,800 - $2,200',
                    carbon: '95 kg CO₂/MT'
                }
            };
            
            const selected = routes[route];
            const polyline = L.polyline(selected.points, { color: selected.color, weight: 3 }).addTo(map);
            
            // Update info cards
            document.getElementById('routeInfo').textContent = selected.info;
            document.getElementById('transitTime').textContent = selected.time;
            document.getElementById('estimatedCost').textContent = selected.cost;
            document.getElementById('carbonEmission').textContent = selected.carbon;
            
            // Fit map to route bounds
            map.fitBounds(polyline.getBounds());
        }

        function updateMap() {
            if (map) {
                // Update route info if a route is selected
                const activeButton = document.querySelector('.route-btn:active, .route-btn:hover');
                if (activeButton) {
                    const route = activeButton.onclick.toString().match(/showRoute\('(.+)'\)/)?.[1];
                    if (route) showRoute(route);
                }
            }
        }

        // AI Documentation Wizard
        function updateWizardContent() {
            const steps = [
                {
                    title: currentLang === 'en' ? 'Step 1: Product Information' : 'Hatua ya 1: Taarifa za Bidhaa',
                    desc: currentLang === 'en' ? 'Enter details about the product you\'re exporting' : 'Ingiza maelezo kuhusu bidhaa unayosafirisha',
                    content: `
                        <input type="text" id="productName" placeholder="${currentLang === 'en' ? 'Product name...' : 'Jina la bidhaa...'}" style="width: 100%; padding: 15px; border: none; border-radius: 8px; margin-bottom: 15px;">
                        <input type="number" id="productQuantity" placeholder="${currentLang === 'en' ? 'Quantity (MT)...' : 'Kiasi (MT)...'}" style="width: 100%; padding: 15px; border: none; border-radius: 8px;">
                    `
                },
                {
                    title: currentLang === 'en' ? 'Step 2: Destination Details' : 'Hatua ya 2: Maelezo ya Lengwa',
                    desc: currentLang === 'en' ? 'Select destination country and port' : 'Chagua nchi ya lengwa na bandari',
                    content: `
                        <select id="destinationCountry" style="width: 100%; padding: 15px; border: none; border-radius: 8px; margin-bottom: 15px;">
                            <option value="">${currentLang === 'en' ? 'Select country' : 'Chagua nchi'}</option>
                            <option value="germany">Germany</option>
                            <option value="china">China</option>
                            <option value="uae">UAE</option>
                            <option value="usa">USA</option>
                        </select>
                        <input type="text" id="destinationPort" placeholder="${currentLang === 'en' ? 'Destination port...' : 'Bandari ya lengwa...'}" style="width: 100%; padding: 15px; border: none; border-radius: 8px;">
                    `
                },
                {
                    title: currentLang === 'en' ? 'Step 3: Required Documents' : 'Hatua ya 3: Nyaraka Zinazohitajika',
                    desc: currentLang === 'en' ? 'Our AI analyzes and lists required documents' : 'AI yetu inachambua na kuorodhesha nyaraka zinazohitajika',
                    content: `
                        <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 8px;">
                            <h4>${currentLang === 'en' ? 'Documents needed:' : 'Nyaraka zinazohitajika:'}</h4>
                            <ul style="margin: 15px 0; padding-left: 20px;">
                                <li>${currentLang === 'en' ? 'Commercial Invoice' : 'Ankara ya Biashara'}</li>
                                <li>${currentLang === 'en' ? 'Packing List' : 'Orodha ya Kufunga'}</li>
                                <li>${currentLang === 'en' ? 'Certificate of Origin' : 'Cheti cha Asili'}</li>
                                <li>${currentLang === 'en' ? 'Phytosanitary Certificate' : 'Cheti cha Afya ya Mimea'}</li>
                            </ul>
                        </div>
                    `
                },
                {
                    title: currentLang === 'en' ? 'Step 4: Generate Documents' : 'Hatua ya 4: Tunga Nyaraka',
                    desc: currentLang === 'en' ? 'AI generates filled documents for review' : 'AI inatunga nyaraka zilizojazwa kwa ukaguzi',
                    content: `
                        <div style="text-align: center;">
                            <i class="fas fa-file-pdf" style="font-size: 4rem; margin-bottom: 20px;"></i>
                            <p>${currentLang === 'en' ? 'Documents generated successfully!' : 'Nyaraka zimetungwa kwa mafanikio!'}</p>
                            <button onclick="downloadDocuments()" style="background: white; color: #667eea; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer; margin-top: 15px;">
                                <i class="fas fa-download"></i>
                                ${currentLang === 'en' ? 'Download Documents' : 'Pakua Nyaraka'}
                            </button>
                        </div>
                    `
                },
                {
                    title: currentLang === 'en' ? 'Step 5: Complete & Submit' : 'Hatua ya 5: Kamilisha na Wasilisha',
                    desc: currentLang === 'en' ? 'Submit documents for processing' : 'Wasilisha nyaraka kwa usindikaji',
                    content: `
                        <div style="text-align: center;">
                            <i class="fas fa-check-circle" style="font-size: 4rem; color: #4caf50; margin-bottom: 20px;"></i>
                            <p>${currentLang === 'en' ? 'Ready to submit! Our team will process within 24 hours.' : 'Tayari kwa kusajiliwa! Timu yetu itasindika ndani ya masaa 24.'}</p>
                            <button onclick="submitDocuments()" style="background: #4caf50; color: white; border: none; padding: 15px 40px; border-radius: 8px; cursor: pointer; font-size: 1.1rem;">
                                <i class="fas fa-paper-plane"></i>
                                ${currentLang === 'en' ? 'Submit for Processing' : 'Wasilisha kwa Usindikaji'}
                            </button>
                        </div>
                    `
                }
            ];

            if (currentStep <= steps.length) {
                const step = steps[currentStep - 1];
                const content = document.getElementById('wizardContent');
                content.innerHTML = `
                    <h3>${step.title}</h3>
                    <p>${step.desc}</p>
                    <div style="margin-top: 20px;">${step.content}</div>
                    <div style="margin-top: 30px; display: flex; justify-content: space-between;">
                        ${currentStep > 1 ? `
                            <button onclick="prevStep()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer;">
                                <i class="fas fa-arrow-left"></i>
                                ${currentLang === 'en' ? 'Previous' : 'Nyuma'}
                            </button>
                        ` : '<div></div>'}
                        
                        ${currentStep < steps.length ? `
                            <button onclick="nextStep()" style="background: var(--secondary); color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer;">
                                ${currentLang === 'en' ? 'Next Step' : 'Hatua Inayofuata'} <i class="fas fa-arrow-right"></i>
                            </button>
                        ` : ''}
                    </div>
                `;
            }
        }

        function goToStep(step) {
            currentStep = step;
            updateWizardSteps();
            updateWizardContent();
        }

        function nextStep() {
            if (currentStep < 5) {
                currentStep++;
                updateWizardSteps();
                updateWizardContent();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateWizardSteps();
                updateWizardContent();
            }
        }

        function updateWizardSteps() {
            const steps = document.querySelectorAll('.wizard-step');
            const progress = document.getElementById('wizardProgress');
            
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
            
            progress.style.width = `${((currentStep - 1) / 4) * 100}%`;
        }

        function downloadDocuments() {
            alert(currentLang === 'en'
                ? "Downloading export documents package...\nIncludes: Commercial Invoice, Packing List, Certificate of Origin"
                : "Inapakua kifurushi cha nyaraka za usafirishaji...\nInajumuisha: Ankara ya Biashara, Orodha ya Kufunga, Cheti cha Asili");
        }

        function submitDocuments() {
            alert(currentLang === 'en'
                ? "Documents submitted successfully!\nOur team will process them within 24 hours.\nYou'll receive a tracking number via email."
                : "Nyaraka zimesajiliwa kwa mafanikio!\nTimu yetu itazisindika ndani ya masaa 24.\nUtapokea nambari ya ufuatiliaji kupitia barua pepe.");
        }

        // Port Congestion Monitor
        function initPortCongestion() {
            const ports = [
                { name: 'Rotterdam', country: 'Netherlands', congestion: 35, status: 'low' },
                { name: 'Shanghai', country: 'China', congestion: 85, status: 'high' },
                { name: 'Singapore', country: 'Singapore', congestion: 60, status: 'medium' },
                { name: 'Dubai', country: 'UAE', congestion: 45, status: 'medium' },
                { name: 'Hamburg', country: 'Germany', congestion: 40, status: 'low' },
                { name: 'Los Angeles', country: 'USA', congestion: 75, status: 'high' },
                { name: 'Dar es Salaam', country: 'Tanzania', congestion: 30, status: 'low' },
                { name: 'Mombasa', country: 'Kenya', congestion: 55, status: 'medium' }
            ];

            const grid = document.getElementById('congestionGrid');
            grid.innerHTML = '';

            ports.forEach(port => {
                const cell = document.createElement('div');
                cell.className = 'port-cell';
                
                const statusClass = port.status === 'low' ? 'low-congestion' : 
                                   port.status === 'medium' ? 'medium-congestion' : 'high-congestion';
                
                cell.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 5px;">${port.name}</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">${port.country}</div>
                    <div class="congestion-level ${statusClass}">${port.congestion}%</div>
                `;
                
                cell.addEventListener('click', () => {
                    const statusText = currentLang === 'en'
                        ? `Port of ${port.name}: ${port.congestion}% congestion\nExpected delay: ${getDelayText(port.congestion)}`
                        : `Bandari ya ${port.name}: ${port.congestion}% msongamano\nUcheleweshaji unaotarajiwa: ${getDelayText(port.congestion)}`;
                    
                    alert(statusText);
                });
                
                grid.appendChild(cell);
            });

            updateLastUpdated();
        }

        function getDelayText(congestion) {
            if (congestion < 40) return currentLang === 'en' ? '0-2 days' : 'siku 0-2';
            if (congestion < 70) return currentLang === 'en' ? '3-7 days' : 'siku 3-7';
            return currentLang === 'en' ? '8-14 days' : 'siku 8-14';
        }

        function refreshCongestionData() {
            // Simulate data refresh
            const cells = document.querySelectorAll('.port-cell .congestion-level');
            cells.forEach(cell => {
                const current = parseInt(cell.textContent);
                const change = Math.floor(Math.random() * 20 - 10); // -10 to +10
                const newValue = Math.max(10, Math.min(100, current + change));
                
                cell.textContent = `${newValue}%`;
                
                // Update status class
                cell.classList.remove('low-congestion', 'medium-congestion', 'high-congestion');
                if (newValue < 40) cell.classList.add('low-congestion');
                else if (newValue < 70) cell.classList.add('medium-congestion');
                else cell.classList.add('high-congestion');
            });
            
            updateLastUpdated();
            
            alert(currentLang === 'en'
                ? "Port congestion data refreshed!\nUpdated with latest vessel tracking information."
                : "Data ya msongamano wa bandari imesasishwa!\nImehakikishiwa na taarifa za hivi karibuni za ufuatiliaji wa meli.");
        }

        function updateLastUpdated() {
            const now = new Date();
            const timeString = now.toLocaleTimeString(currentLang === 'en' ? 'en-US' : 'sw-TZ', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('lastUpdated').textContent = timeString;
        }

        // Carbon Footprint Calculator
        function initCarbonCalculator() {
            const weightSlider = document.getElementById('weightSlider');
            const distanceSlider = document.getElementById('distanceSlider');
            
            weightSlider.addEventListener('input', function() {
                document.getElementById('weightValue').textContent = `${this.value} MT`;
            });
            
            distanceSlider.addEventListener('input', function() {
                document.getElementById('distanceValue').textContent = `${parseInt(this.value).toLocaleString()} km`;
            });
            
            calculateCarbonFootprint(); // Initial calculation
        }

        function calculateCarbonFootprint() {
            const weight = parseInt(document.getElementById('weightSlider').value);
            const distance = parseInt(document.getElementById('distanceSlider').value);
            const mode = document.getElementById('transportMode').value;
            
            // CO2 emissions in kg per ton-km
            const emissionFactors = {
                ship: 0.015,    // 15g CO2 per ton-km
                air: 0.500,     // 500g CO2 per ton-km
                road: 0.060     // 60g CO2 per ton-km
            };
            
            const co2 = weight * distance * emissionFactors[mode];
            const trees = co2 / 21.77; // Average CO2 absorbed by one tree per year
            
            // Update visualization
            const visualization = document.getElementById('carbonVisualization');
            visualization.innerHTML = '';
            
            const modes = [
                { name: currentLang === 'en' ? 'Sea' : 'Bahari', factor: 0.015 },
                { name: currentLang === 'en' ? 'Air' : 'Anga', factor: 0.500 },
                { name: currentLang === 'en' ? 'Road' : 'Barabara', factor: 0.060 }
            ];
            
            modes.forEach(m => {
                const barCo2 = weight * distance * m.factor;
                const barHeight = (barCo2 / 1000) * 5; // Scale for visualization
                
                const bar = document.createElement('div');
                bar.className = 'carbon-bar';
                bar.style.height = `${Math.min(barHeight, 200)}px`;
                bar.setAttribute('data-co2', `${Math.round(barCo2)} kg`);
                
                const label = document.createElement('div');
                label.style.position = 'absolute';
                label.style.bottom = '-50px';
                label.style.left = '50%';
                label.style.transform = 'translateX(-50%)';
                label.style.fontSize = '0.9rem';
                label.textContent = m.name;
                
                bar.appendChild(label);
                visualization.appendChild(bar);
            });
            
            // Update result
            const result = document.getElementById('carbonResult');
            result.innerHTML = currentLang === 'en'
                ? `Estimated CO₂ Emissions: <strong>${Math.round(co2)} kg</strong><br>
                   Equivalent to planting <strong>${Math.round(trees)} trees</strong>`
                : `Utoaji wa CO₂ unaokadiriwa: <strong>${Math.round(co2)} kg</strong><br>
                   Sawa na kupanda <strong>${Math.round(trees)} miti</strong>`;
        }

        function offsetCarbon() {
            const co2 = Math.round(parseInt(document.getElementById('weightSlider').value) * 
                                  parseInt(document.getElementById('distanceSlider').value) * 0.015);
            
            alert(currentLang === 'en'
                ? `🌱 Carbon Offset Initiated!\n\nOffsetting ${co2} kg CO₂\nCost: $${(co2 * 0.02).toFixed(2)}\n\nWe'll plant ${Math.round(co2/21.77)} trees in Tanzania to offset your shipment.`
                : `🌱 Usawazishaji wa Kaboni Umeanzishwa!\n\nKusawazisha ${co2} kg CO₂\nGharama: $${(co2 * 0.02).toFixed(2)}\n\nTutapanda ${Math.round(co2/21.77)} miti Tanzania kusawazisha shehena yako.`);
        }

        // Logistics Cost Estimator
        function selectContainer(size, type = 'standard') {
            selectedContainer = { size, type };
            
            // Update button styles
            document.querySelectorAll('.container-btn').forEach(btn => {
                btn.style.background = '#666';
            });
            event.target.style.background = '#4caf50';
            
            calculateLogisticsCost(); // Recalculate
        }

        function calculateLogisticsCost() {
            const origin = document.getElementById('originPort').value;
            const destination = document.getElementById('destinationPort').value;
            
            // Base costs
            const baseCosts = {
                'dar_rotterdam': { sea: 2800, air: 8500, road: 0 },
                'dar_shanghai': { sea: 3200, air: 9200, road: 0 },
                'dar_dubai': { sea: 1800, air: 5200, road: 0 },
                'dar_newyork': { sea: 3500, air: 9500, road: 0 }
            };
            
            const key = `${origin}_${destination}`;
            const baseCost = baseCosts[key]?.sea || 2500;
            
            // Adjust for container size
            let containerMultiplier = 1;
            if (selectedContainer.size === 40) containerMultiplier = 1.8;
            if (selectedContainer.size === 40 && selectedContainer.type === 'hc') containerMultiplier = 2.0;
            
            // Calculate costs
            const shippingCost = baseCost * containerMultiplier;
            const documentationCost = 350;
            const insuranceCost = shippingCost * 0.02;
            const customsCost = shippingCost * 0.05;
            const totalCost = shippingCost + documentationCost + insuranceCost + customsCost;
            
            // Update results
            const result = document.getElementById('estimatorResult');
            result.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${currentLang === 'en' ? 'Shipping Cost' : 'Gharama ya Usafirishaji'}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">$${shippingCost.toLocaleString()}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${currentLang === 'en' ? 'Documentation' : 'Nyaraka'}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">$${documentationCost.toLocaleString()}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${currentLang === 'en' ? 'Insurance' : 'Bima'}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">$${insuranceCost.toLocaleString()}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${currentLang === 'en' ? 'Customs & Duties' : 'Forodha na Usuru'}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">$${customsCost.toLocaleString()}</div>
                    </div>
                </div>
                <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid rgba(255,255,255,0.2); text-align: center;">
                    <div style="font-size: 0.9rem; opacity: 0.8;">${currentLang === 'en' ? 'TOTAL ESTIMATED COST' : 'GHARAMA YA JUMLA ILIYOKADIRIWA'}</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: var(--secondary);">$${totalCost.toLocaleString()}</div>
                    <div style="margin-top: 10px; font-size: 0.9rem;">
                        ${currentLang === 'en' 
                            ? '*Estimate valid for 7 days. Contact for exact quote.' 
                            : '*Kadirio halali kwa siku 7. Wasiliana kwa nakala kamili.'}
                    </div>
                </div>
            `;
        }

        // Document Processing Timeline
        function simulateDocumentProcess() {
            const steps = document.querySelectorAll('.step-circle');
            const status = document.getElementById('documentStatus');
            
            let currentIndex = 0;
            
            const processInterval = setInterval(() => {
                if (currentIndex > 0) {
                    steps[currentIndex - 1].classList.remove('active');
                    steps[currentIndex - 1].classList.add('completed');
                }
                
                if (currentIndex < steps.length) {
                    steps[currentIndex].classList.add('active');
                    
                    const statusMessages = currentLang === 'en' ? [
                        "Document Preparation in Progress",
                        "Verifying document authenticity",
                        "Awaiting regulatory approval",
                        "Recording on blockchain",
                        "Documents delivered successfully!"
                    ] : [
                        "Utayarishaji wa Nyaraka Unaendelea",
                        "Kuthibitisha ukweli wa nyaraka",
                        "Ngoja idhini ya udhibiti",
                        "Kurekodi kwenye blockchain",
                        "Nyaraka zimewasilishwa kwa mafanikio!"
                    ];
                    
                    status.textContent = currentLang === 'en'
                        ? `Status: ${statusMessages[currentIndex]}`
                        : `Hali: ${statusMessages[currentIndex]}`;
                    
                    currentIndex++;
                } else {
                    clearInterval(processInterval);
                    setTimeout(() => {
                        alert(currentLang === 'en'
                            ? "✅ Document Processing Complete!\n\nAll documents have been processed and recorded on our blockchain.\nYou can now verify the transaction."
                            : "✅ Usindikaji wa Nyaraka Umekamilika!\n\nNyaraka zote zimesindikwa na kurekodiwa kwenye blockchain yetu.\nSasa unaweza kuthibitisha muamala.");
                    }, 500);
                }
            }, 1500);
        }

        function verifyOnBlockchain() {
            const txHash = '0x' + Array(64).fill(0).map(() => 
                Math.floor(Math.random() * 16).toString(16)).join('');
            
            alert(currentLang === 'en'
                ? `🔗 Blockchain Verification\n\nTransaction Hash: ${txHash}\nStatus: ✅ Verified\nBlock: #${Math.floor(Math.random() * 10000) + 15000000}\nTimestamp: Just now\n\nThis document is permanently recorded on the blockchain.`
                : `🔗 Uthibitishaji wa Blockchain\n\nHash ya Muamala: ${txHash}\nHali: ✅ Imethibitishwa\nBlock: #${Math.floor(Math.random() * 10000) + 15000000}\nMuda: Hivi sasa\n\nHati hii imerekodiwa kwa kudumu kwenye blockchain.`);
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            changeLanguage('en');
            initMap();
            initPortCongestion();
            initCarbonCalculator();
            calculateLogisticsCost(); // Initial calculation
            
            // Auto-refresh congestion data every 2 minutes
            setInterval(refreshCongestionData, 120000);
            
            // Simulate live vessel movements on map
            setInterval(() => {
                if (Math.random() > 0.7) {
                    // Add a temporary vessel marker
                    const lat = -30 + Math.random() * 60;
                    const lng = -30 + Math.random() * 60;
                    
                    const vessel = L.circleMarker([lat, lng], {
                        color: '#2196f3',
                        fillColor: '#2196f3',
                        fillOpacity: 0.7,
                        radius: 5
                    }).addTo(map);
                    
                    vessel.bindPopup(currentLang === 'en'
                        ? '🛳️ Live Vessel<br>Speed: 18 knots<br>Destination: Rotterdam'
                        : '🛳️ Meli ya Wakati Halisi<br>Kasi: knots 18<br>Lengwa: Rotterdam');
                    
                    setTimeout(() => {
                        map.removeLayer(vessel);
                    }, 10000);
                }
            }, 5000);
        });
    </script>
</body>
</html>
